<!--pages/index/index.wxml-->
<view class="container">
  <!-- 今日统计 -->
  <view class="stats-section">
    <view class="stats-title">今日统计</view>
    <view class="stats-grid">
      <view class="stats-item">
        <view class="stats-number">{{todayStats.visitCount}}</view>
        <view class="stats-label">今日拜访</view>
      </view>
      <view class="stats-item">
        <view class="stats-number">{{todayStats.checkinCount}}</view>
        <view class="stats-label">今日打卡</view>
      </view>
      <view class="stats-item">
        <view class="stats-number">{{todayStats.customerCount}}</view>
        <view class="stats-label">客户总数</view>
      </view>
    </view>
  </view>

  <!-- 快捷操作 -->
  <view class="quick-actions-section">
    <view class="section-title">快捷操作</view>
    <view class="quick-actions-grid">
      <view 
        class="quick-action-item" 
        wx:for="{{quickActions}}" 
        wx:key="title"
        data-url="{{item.url}}"
        bindtap="onQuickActionTap"
      >
        <image class="quick-action-icon" src="{{item.icon}}" mode="aspectFit"></image>
        <view class="quick-action-title">{{item.title}}</view>
      </view>
    </view>
  </view>

  <!-- 最近拜访 -->
  <view class="recent-visits-section">
    <view class="section-header">
      <view class="section-title">最近拜访</view>
      <view class="section-more" bindtap="onMoreVisitsTap">查看更多</view>
    </view>
    <view class="visit-list" wx:if="{{recentVisits.length > 0}}">
      <view 
        class="visit-item" 
        wx:for="{{recentVisits}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onVisitTap"
      >
        <view class="visit-info">
          <view class="visit-customer">{{item.customerName}}</view>
          <view class="visit-purpose">{{item.purpose}}</view>
          <view class="visit-date">{{item.visitDate}}</view>
        </view>
        <view class="visit-arrow">></view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <image class="empty-icon" src="/images/icon/空状态.png" mode="aspectFit"></image>
      <view class="empty-text">暂无拜访记录</view>
    </view>
  </view>

  <!-- 即将到来的拜访计划 -->
  <view class="upcoming-plans-section">
    <view class="section-header">
      <view class="section-title">拜访计划</view>
      <view class="section-more" bindtap="onMorePlansTap">查看更多</view>
    </view>
    <view class="plan-list" wx:if="{{upcomingPlans.length > 0}}">
      <view 
        class="plan-item" 
        wx:for="{{upcomingPlans}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="onPlanTap"
      >
        <view class="plan-info">
          <view class="plan-customer">{{item.customerName}}</view>
          <view class="plan-purpose">{{item.purpose}}</view>
          <view class="plan-time">{{item.planDate}} {{item.planTime}}</view>
        </view>
        <view class="plan-status pending">待执行</view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <image class="empty-icon" src="/images/icon/空状态.png" mode="aspectFit"></image>
      <view class="empty-text">暂无拜访计划</view>
    </view>
  </view>
</view>